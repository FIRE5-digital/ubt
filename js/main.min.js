"use strict";var userAgent,ieReg,ie;if(userAgent=window.navigator.userAgent,ie=(ieReg=/msie|Trident.*rv[ :]*11\./gi).test(userAgent))for(var imgContainer=document.querySelectorAll(".img-container"),i=0;i<imgContainer.length;i++){var imgCtr=imgContainer[i],imgUrl=imgCtr.getElementsByTagName("img")[0].src;imgUrl&&(imgCtr.setAttribute("style","background-image:url('"+imgUrl+"')"),imgCtr.classList.add("custom-object-fit"))}function priceswitch(e){e.preventDefault(),document.getElementById("switch-price-type").value=this.value,document.getElementById("price-switch").submit()}var price_buttons=document.querySelectorAll("#price-switch button");for(i=0;i<price_buttons.length;i++)price_buttons[i].addEventListener("click",priceswitch,!1);function toggleNav(e){var t=e,n=document.getElementById("site-menu"),o=document.querySelectorAll(".site-header")[0];n.classList.toggle("active"),o.classList.toggle("active"),t.querySelector("span").classList.contains("more")?t.innerHTML="<span class='close'></span> Close":t.innerHTML="<span class='more'></span> Menu"}var showAccordion=function(){this.parentNode.classList.toggle("active")},accordionButton=document.querySelectorAll(".accordion > button");for(i=0;i<accordionButton.length;i++)accordionButton[i].addEventListener("click",showAccordion,!1);var modalMobileNav=new tingle.modal({closeMethods:[],cssClass:["mobile-nav","reversed"]}),navContainer=document.querySelector(".nav-container"),hamburger=document.querySelector(".hamburger"),handleToggle=function(){hamburger.classList.toggle("is-active"),navContainer.classList.toggle("is-active"),hamburger.classList.contains("is-active")?modalMobileNav.open():modalMobileNav.close()};hamburger.onclick=function(){return handleToggle()},hamburger.addEventListener("keyup",(function(e){13!==e.keyCode&&32!==e.keyCode||handleToggle()})),modalMobileNav.setContent(document.querySelector(".site-menu").innerHTML);var searchDropdown=function(){this.closest(".search-bar").classList.toggle("active")},searchBar=document.querySelectorAll(".search-bar .legend");for(i=0;i<searchBar.length;i++)searchBar[i].addEventListener("click",searchDropdown,!1);document.getElementsByClassName("toggle-search").length>0&&document.getElementsByClassName("toggle-search")[0].addEventListener("click",(function(e){if(e.preventDefault(),null===document.querySelector("#popout-form"))return window.location.href="/search?show-search-bar=true",!1;document.querySelector("#popout-form").classList.contains("hidden")?document.querySelector("#popout-form").classList.remove("hidden"):document.querySelector("#popout-form").classList.add("hidden")}));var menuDropdown=function(){var e=this.parentNode;if(e.classList.contains("active"))e.classList.toggle("active");else{var t=document.querySelectorAll(".menu-dropdown.active");if(null!=t)for(var n=0;n<t.length;n++)t[n].classList.toggle("active");e.classList.toggle("active")}},dropdownTrigger=document.querySelectorAll(".menu-dropdown > a");for(i=0;i<dropdownTrigger.length;i++)dropdownTrigger[i].addEventListener("click",menuDropdown,!1);var showMenu=function(){var e=this.parentNode.querySelector("div");if(e.classList.contains("active"))return e.classList.toggle("active"),void this.classList.toggle("active");var t=document.querySelectorAll(".dropdown-menu .active");if(null!=t)for(var n=0;n<t.length;n++)t[n].classList.toggle("active");e.classList.toggle("active"),this.classList.toggle("active")};for(menuDropdown=document.querySelectorAll(".dropdown-menu > a"),i=0;i<menuDropdown.length;i++)menuDropdown[i].addEventListener("click",showMenu,!1);var faqSearch=document.querySelector(".faq-search input");null!==faqSearch&&faqSearch.addEventListener("keyup",(function(e){var t=document.getElementById("faq-results");0!=this.value.length?t.classList.add("active"):t.classList.remove("active")}));var classname=document.querySelectorAll(".more-options"),moreOptions=function(e){e.preventDefault();var t=document.getElementById("vehicle-search");t.classList.toggle("active"),t.classList.contains("active")?this.innerHTML="Hide additional options":this.innerHTML="Show me more options"};for(i=0;i<classname.length;i++)classname[i].addEventListener("click",moreOptions,!1);function openTab(e,t){var n,o,a;for(o=document.getElementsByClassName("tab-content"),a=document.getElementsByClassName("tab"),n=0;n<o.length;n++)o[n].className=o[n].className.replace(" active","");for(n=0;n<a.length;n++)a[n].className=a[n].className.replace(" active","");document.getElementById(t).className+=" active",e.currentTarget.className+=" active"}function showDesc(e){e.style.display="none",e.parentNode.querySelector(".extra").classList.remove("visuallyhidden")}function searchType(e,t){var n;for(document.getElementById("search-type").setAttribute("value",t),n=document.getElementsByClassName("search-tab"),i=0;i<n.length;i++)n[i].className=n[i].className.replace(" active","");e.classList.toggle("active"),loadManufacturers(document.getElementById("search-type").classList.contains("search-type-van")?"van":"car"),loadBodyTypes(document.getElementById("search-type").classList.contains("search-type-van")?"van":"car");var o=document.getElementsByName("model")[0];o.length=0;var a=document.createElement("option");a.text="Any Model",a.value="",o.add(a),o.selectedIndex=0}function loadManufacturers(e){var t=document.getElementsByName("make");for(i=0;i<t.length;i++){var n=t[0];n.length=0;var o=document.createElement("option");o.text="Any Make",o.value="",n.add(o),n.selectedIndex=0,fetch("/api/"+e+"/manufacturers/ev").then((function(e){if(200===e.status)return e.json();console.warn("Looks like there was a problem. Status Code: "+e.status)})).then((function(e){var t=Object.keys(e).sort((function(t,n){return e[t].localeCompare(e[n])}));for(var o in t){var a=document.createElement("option");a.text=e[t[o]],a.value=t[o],n.add(a)}})).catch((function(e){console.error("Fetch Error -",e)}))}}function loadModels(e,t){var n=document.getElementsByName("model");for(i=0;i<n.length;i++){var o=n[i];o.length=0;var a=document.createElement("option");if(a.text="Any Model",a.value="",o.add(a),o.selectedIndex=0,t)fetch("/api/"+e+"/models/"+t+"/ev").then((function(e){if(200===e.status)return e.json();console.warn("Looks like there was a problem. Status Code: "+e.status)})).then((function(e){var t=Object.keys(e).sort((function(t,n){return e[t].localeCompare(e[n])}));for(var n in t){var a=document.createElement("option");a.text=e[t[n]],a.value=t[n],o.add(a)}})).catch((function(e){console.error("Fetch Error -",e)}))}}function loadSpecs(e,t){var n=document.getElementsByName("spec")[0];n.length=0;var o=document.createElement("option");(o.text="Any Spec",o.value="",n.add(o),n.selectedIndex=0,t)&&fetch("/api/"+e+"/specs/"+t).then((function(e){if(200===e.status)return e.json();console.warn("Looks like there was a problem. Status Code: "+e.status)})).then((function(e){for(var t in e){var o=document.createElement("option");o.text=e[t],o.value=t,n.add(o)}})).catch((function(e){console.error("Fetch Error -",e)}))}function loadBodyTypes(e){var t=document.getElementsByName("body_type")[0];if(void 0===t)return!1;t.length=0;var n=document.createElement("option");n.text="Any Bodytype",n.value="",t.add(n),t.selectedIndex=0,fetch("/api/"+e+"/types").then((function(e){if(200===e.status)return e.json();console.warn("Looks like there was a problem. Status Code: "+e.status)})).then((function(e){for(var n in e){var o=document.createElement("option");o.text=e[n],o.value=n,t.add(o)}})).catch((function(e){console.error("Fetch Error -",e)}))}document.addEventListener("DOMContentLoaded",(function(){var e=[].slice.call(document.querySelectorAll("img.lazy")),t=!1,n=function n(){!1===t&&(t=!0,e.forEach((function(t){t.getBoundingClientRect().top<=window.innerHeight&&t.getBoundingClientRect().bottom>=0&&"none"!==getComputedStyle(t).display&&(t.src=t.dataset.src,t.classList.remove("lazy"),0===(e=e.filter((function(e){return e!==t}))).length&&(document.removeEventListener("scroll",n),window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)))})),t=!1)};document.addEventListener("scroll",n),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),n()})),window.onload=function(){if(document.getElementsByTagName("html")[0].classList.add("site-loaded"),document.body.classList.add("loaded"),document.getElementsByClassName("search-form").length>0){document.querySelectorAll(".search-form [name=make] option").length<=1&&(loadManufacturers(document.getElementById("search-type").classList.contains("search-type-van")?"van":"car"),loadBodyTypes(document.getElementById("search-type").classList.contains("search-type-van")?"van":"car"));var e=document.getElementsByName("make");for(i=0;i<e.length;i++)e[i].addEventListener("change",(function(e){loadModels(document.getElementById("search-type").classList.contains("search-type-van")?"van":"car",e.target.value)}));var t=document.getElementsByName("model");for(i=0;i<t.length;i++)t[i].addEventListener("change",(function(e){loadSpecs(document.getElementById("search-type").classList.contains("search-type-van")?"van":"car",e.target.value)}))}};var myEfficientFn=debounce((function(){window.innerWidth<=1024?(mobileDerrivative(),window.responsive="touch"):(desktopDerrivative(),window.responsive="desktop")}),250);function debounce(e,t,n){var o;return function(){var a=this,r=arguments,c=function(){o=null,n||e.apply(a,r)},i=n&&!o;clearTimeout(o),o=setTimeout(c,t),i&&e.apply(a,r)}}function mobileDerrivative(){var e,t;if("touch"!==window.responsive&&document.querySelector(".deal-gallery")){for(document.querySelectorAll(".tab")[0].after(document.getElementById("optional-extras")),document.querySelectorAll(".tab")[1].after(document.getElementById("standard-equipment")),document.querySelectorAll(".tab")[2].after(document.getElementById("technical-data")),document.querySelector(".deal-gallery").after(document.querySelector(".deal-aside")),e=document.querySelectorAll(".tab"),i=0;i<e.length;i++)e[i].className=e[i].className.replace(" active","");for(t=document.querySelectorAll(".tab-content"),i=0;i<t.length;i++)t[i].className=t[i].className.replace(" active","")}}function desktopDerrivative(){"desktop"!==window.responsive&&document.querySelector(".deal-gallery")&&(document.querySelector(".tab-list").after(document.getElementById("technical-data")),document.querySelector(".tab-list").after(document.getElementById("standard-equipment")),document.querySelector(".tab-list").after(document.getElementById("optional-extras")),document.querySelector(".deal-main").after(document.querySelector(".deal-aside")),document.querySelectorAll(".tab")[0].classList.add("active"),document.querySelectorAll(".tab-content")[0].classList.add("active"))}function slideThumbnail(e,t,n,o,a,r,c){var i=n,s=o,l=0,d=(r=r,c=c,a);for(var u,m=document.querySelectorAll(".thumbnail a"),v=0;v<m.length;v++)m[v].addEventListener("click",(function(e){var t=this.parentNode,n=this.closest("ul");g(Array.from(n.children).indexOf(t)),e.preventDefault()}),!1);function g(n){var o,a,r;console.log("updateSlide "+n),o=n,a=document.querySelector(".thumbnail:nth-child("+(o+1)+") img").src,document.getElementById("main-img").src=a,console.log(o+" of "+t),o<t-2&&o>1?(r=-100/t*(o-2)+i+"%",console.log("slide")):o<2?(console.log("<2"),r=0+i+"%"):(r=-100/t*(t-d)+i+"%",console.log("dont slide")),e.style.transform="translate("+r+", 0)",l=o}function h(){g(l<t-d?l+1:0)}e.parentElement.parentElement.querySelector("a.next").addEventListener("click",(function(){r=!1,h()}),!1),e.parentElement.parentElement.querySelector("a.prev").addEventListener("click",(function(){r=!1,l>0&&g(l-1)}),!1),1==r&&(u=setInterval((function(){!1!==r?h():clearInterval(u)}),c)),e.style.transform="translate("+i+"%, 0)",e.style.width=s*t+"%",window.dispatchEvent(new Event("resize"))}window.addEventListener("resize",myEfficientFn),myEfficientFn();
//# sourceMappingURL=main.min.js.map
